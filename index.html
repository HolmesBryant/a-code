<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>A-Code Web Component</title>
	<script type="module" src="extra/a-bind.js"></script>
	<script type="module" src="dist/a-code.min.js"></script>
	<!-- <script type="module" src="src/a-code.js"></script> -->
	<script type="module" src="extra/a-tabset.min.js"></script>
	<link rel="stylesheet" href="extra/styles.css">
	<link rel="stylesheet" href="dist/a-code.css">
	<link rel="stylesheet" href="extra/a-tabset.css">

	<script>
		if (!window.CSS.highlights) alert ('This browser does not yet support the CSS Custom Highlight API')
	</script>
</head>
<body>
	<h1>A-Code Web Component</h1>
	<p>A custom element for displaying code snippets with consistent formatting and optional highlighting: <a href="https://github.com/HolmesBryant/a-code">Github Repo</a></p>

	<details>
	<summary>README</summary>
		<div id="instructions"> </div>
	</details>

	<h2>Demo</h2>

	<section id="demo">
		<a-tabset>
			<strong slot="title">Javascript</strong>
			<article slot="content">
				<section id="js-demo-form" class="flex">
					<div class="flex column gap0">
					<label for="js-demo-indent">indent</label>
						<a-bind
							o="#javascript-code"
							p="indent">
							<input id="js-demo-indent" list="js-demo-indents">
						</a-bind>

						<datalist id="js-demo-indents">
							<option>1</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>1rem</option>
							<option>2rem</option>
							<option>3rem</option>
							<option>4rem</option>
							<option>1px</option>
							<option>2px</option>
							<option>3px</option>
							<option>4px</option>
						</datalist>
					</div>

					<div class="flex column gap0">
					<label for="demo-highlight">highlight</label>
						<a-bind o="#javascript-code" p="highlight">
							<select id="demo-highlight">
								<option value="">Default (html)</option>
								<option>false</option>
								<option>javascript</option>
								<option>html</option>
							</select>
						</a-bind>
					</div>

					<div class="flex column gap0">
					<label for="demo-palette">palette</label>

						<a-bind o="#javascript-code" p="palette">
							<select id="demo-palette">
								<option value="default">Default Palette</option>
								<option
									value='[["argument", "orange"], ["comment", "gray"], ["function", "brown"], ["keyword", "olive"], ["number", "darksalmon"], ["operator", "darkred"], ["string", "royalblue"], ["tag", "olive"]]'>
									Custom Palette
								</option>
							</select>
						</a-bind>
					</div>

					<fieldset class="flex">
					<legend>line-numbers</legend>
						<div class="flex column gap0">
							<label for="js-line-numbers-true">true</label>

							<a-bind o="#javascript-code" p="lineNumbers">
								<input
									type="radio"
									value="true"
									name="js-line-numbers"
									id="js-line-numbers-true">
							</a-bind>
						</div>

						<div class="flex column gap0">
							<label for="js-line-numbers-false">false</label>

							<a-bind o="#javascript-code" p="lineNumbers">
								<input
									type="radio"
									value="false"
									name="js-line-numbers"
									id="js-line-numbers-false">
							</a-bind>
						</div>
					</fieldset>

					<div class="flex column gap0">
					<label for="js-demo-inline">inline</label>
						<a-bind o="#javascript-code" p="inline">
						<input
							type="checkbox"
							value="true"
							id="js-demo-inline">
						</a-bind>
					</div>
				</section>

				<a-code
					id="javascript-code"
					class="demo"
					line-numbers
					highlight="javascript">
					#! hashbang

					/**
					 * @function foo
					 * @description Does foo things
					 *
					 * @param {HTMLElement}	element An HTML element
					 */
					function foo (element) {
						let bar, output = '';
						const baz = "boom";
						const result = document.querySelector('#result');
						const bing = ["one", "123.456", -12.5, +100, "3px", 2^3, 2.5e3, 1.2E-3, 1**2, 0x123, 0xFAF];

						bar = 2 * 3;

						// This is a comment
						/*Another comment*/
						for (const child of element.children) {
							for (const attr of child.attributes) {
								output += `
									${attr.name} -> ${attr.value}\n
									<p id="foo">Some text</p>
								`;
							}
						}

						someElement.addEventListener (
							'click',
							event => { console.log(event); }
						);

						const func = (arg) => arg.toLowerCase();

						return output;
					}

					class MyClass {
						@foo
						sayHello(name) {
							return `Hello, ${name}!`;
						}
					}
				</wijt-code>
			</article>

			<strong slot="title">HTML</strong>
			<article slot="content">
				<section id="html-demo-form" class="flex">
					<div class="flex column gap0">
					<label for="html-demo-indent">indent</label>
						<a-bind
							o="#html-code"
							p="indent">
							<input id="html-demo-indent" list="html-demo-indents">
						</a-bind>

						<datalist id="html-demo-indents">
							<option>1</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>1rem</option>
							<option>2rem</option>
							<option>3rem</option>
							<option>4rem</option>
							<option>1px</option>
							<option>2px</option>
							<option>3px</option>
							<option>4px</option>
						</datalist>
					</div>

					<div class="flex column gap0">
					<label for="html-demo-highlight">highlight</label>
						<a-bind o="#html-code" p="highlight">
							<select id="html-demo-highlight">
								<option value="">Default (html)</option>
								<option>false</option>
								<option>javascript</option>
								<option>html</option>
							</select>
						</a-bind>
					</div>

					<div class="flex column gap0">
					<label for="html-demo-palette">palette</label>

						<a-bind o="#html-code" p="palette">
							<select id="html-demo-palette">
								<option value="default">Default Palette</option>
								<option
									value='[["argument", "orange"], ["comment", "gray"], ["function", "brown"], ["keyword", "olive"], ["number", "darksalmon"], ["operator", "darkred"], ["string", "royalblue"], ["tag", "olive"]]'>
									Custom Palette
								</option>
							</select>
						</a-bind>
					</div>

					<fieldset class="flex">
					<legend>line-numbers</legend>
						<div class="flex column gap0">
							<label for="html-line-numbers-true">true</label>

							<a-bind o="#html-code" p="lineNumbers">
								<input
									type="radio"
									value="true"
									name="html-line-numbers"
									id="html-line-numbers-true">
							</a-bind>
						</div>

						<div class="flex column gap0">
							<label for="html-line-numbers-false">false</label>

							<a-bind o="#html-code" p="lineNumbers">
								<input
									type="radio"
									value="false"
									name="html-line-numbers"
									id="html-line-numbers-false">
							</a-bind>
						</div>
					</fieldset>

					<div class="flex column gap0">
					<label for="html-demo-inline">inline</label>
						<a-bind o="#html-code" p="inline">
						<input
							type="checkbox"
							value="true"
							id="html-demo-inline">
						</a-bind>
					</div>
				</section>

				<a-code
					id="html-code"
					class="demo"
					line-numbers
					highlight="html">
					<textarea>
						<style>
							/**** A Comment ****/

							/* Another
								Comment */

							body {
								--var1: rgb(250, 250, 250);
								--var2: #f2f2f2;
								--var3: white;
								--argument: hsl(32, 93%, 66%);

							  background: var(--var1);
								font-family: sans-serif;
								font-size: 16px;
							  height: 100%;
							  letter-spacing: .1rem;
								padding: 1rem;
							}

							@media (prefers-color-scheme: dark) {
								body {
							    --var1: rgb(20, 20, 20);
								}

								* { padding: 0; }
							}

							@media (max-width: 300px) {
								* { padding: 0; }
							}

								section,
							  summary
							  { background-color: var(--bg2) }

							  summary:hover,
							  details[open] > summary
							  {
							  	background-image: linear-gradient(
							  		to bottom,
							  		#008000,
							  		rgb(0, 128, 0) 0 10%,
							  		rgba(0, 128, 0, 0.5) 10% 20%,
							  		hsl(120, 100%, 25.098%) 30%,
							  		hwb(120 0% 49.804%),
							  		color(a98-rgb 0.28137 0.49802 0.11675),
							  		lab(46.278 -47.552 48.586),
							  		#333 50%
							  	),
							  	linear-gradient(336deg, rgba(0,0,255,.8), rgba(0,0,255,0) 70.71%);
								}

								section[data-foo="bar"] {
									margin: 0 auto 1rem auto;
									padding: 1rem;
								}

								div::before{
									content: "*";
								}

								div::after {
									content: "";
								}
						</style>
						<!-- Comment -->
						<!--A
							multi-line
							comment-->

						<img src="false" onerror="alert('foo')">

						<p class="some-class">Some Text</p>
						<div>
							<label for="test-number" data-foo="" id=foo>Number</label>

							<input
								name="input"
								value="2"
								id="test-number"
								list="test-numbers"
								oninput="doSomething(event)">

							<datalist id="test-numbers">
								<option>1</option>
								<option>"123.456"</option>
								<option>-12.5</option>
								<option>+100</option>
								<option>3px</option>
								<option>2.5e3</option>
								<option>1.2e-3</option>
								<option>0x123</option>
								<option>9.876E9</option>
								<option>0xFAF</option>
							</datalist>
						</div>

						<a-code highlight="html">
							<article>
								<h1>A Title</h1>
								<p class="foo">Some text</p>
							</article>
						</a-code>
					</textarea>
				</a-code>
			</article>
		</a-tabset>
	</section>

	<h2>Examples</h2>

	<section id="examples" class="flex stretch center">
		<div class="card">
			<h3>Inline Code</h3>
			<a-code>
				<textarea>
					<a-code inline>...</a-code >
				</textarea>
			</a-code>

			<p>Some text <a-code inline> function foo(){ console.log('foo') }</a-code> some more text.</p>
		</div>

		<div class="card f300">
			<h3>Indent (integer)</h3>
			<a-code indent="2">
				<textarea>
					<a-code indent="2" >
						<article>
							<h1>A Title</h1>
							<p>Some text</p>
						</article>
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card f300">
			<h3>Indent (css length)</h3>
			<a-code html indent=".5rem">
				<textarea>
					<a-code indent=".5rem" >
						<article>
							<h1>A Title</h1>
							<p>Some text</p>
						</article>
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card f300">
			<h3>Add line numbers</h3>
			<a-code line-numbers>
				<textarea>
					<a-code line-numbers>
						<article>
							<h1>A Title</h1>
							<p>Some text</p>
						</article>
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card f300">
		<h3>Highlight HTML/CSS</h3>
			<a-code id="editable" highlight>
				<textarea>
					<a-code highlight>
						<article>
							<h1>A Title</h1>
							<p class="foo">Some text</p>
						</article>
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card f300">
		<h3>Highlight using Keyword</h3>
			<a-code id="editable" highlight="javascript" edit>
				<textarea>
					<a-code highlight="javascript">
						function foo(bar) {
							return bar;
						}
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card">
		<h3>Highlight Code using Url</h3>
			<a-code highlight="./syntax.javascript.js">
				<textarea>
					<a-code
						highlight="./syntax.javascript.js">
						console.log('foo');
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card">
			<h3>
				Prevent code execution: Wrap code in textarea
			</h3>

			<a-code>
				<textarea>
					<a-code>
						&lt;textarea>
							<img src="false" onerror="alert('fubar!')">
						&lt;/textarea>
					</a-code>
				</textarea>
			</a-code>
		</div>

		<div class="card">
			<h3>
				Nested Textareas:
				<small>escape slashes in nested closing tags with a backslash</small>
			</h3>
			<a-code>
				<textarea>
					<a-code>
						&lt;textarea>
							<img src="false" onerror="alert('fubar!')">
							<textarea>
								...
							<\\/textarea>
						&lt;/textarea>
					</a-code>
				</textarea>
			</a-code>
		</div>
	</section>

	<script src="extra/scripts.js"></script>
	<!-- comment -->
</body>
</html>
